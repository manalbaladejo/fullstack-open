(window.webpackJsonpphonebook=window.webpackJsonpphonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(13),o=t.n(u),l=t(2),c=function(e){var n=e.filterVal,t=e.handleFilterChange;return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:n,onChange:t}))},i=function(e){var n=e.handleSubmit,t=e.newName,a=e.handleNameChange,u=e.newNumber,o=e.handleNumberChange;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:t,onChange:a})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:u,onChange:o})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},m=function(e){var n=e.persons,t=e.filterVal,a=e.deleteEntry;return n.filter(function(e){return e.name.includes(t)}).map(function(e){return r.a.createElement("li",{key:e.id},e.name," ",e.number," ",r.a.createElement("button",{onClick:function(){return a(e.id)}},"delete"))})},d=t(3),f=t.n(d),s="/api/persons",h=function(){return f.a.get(s).then(function(e){return e.data}).catch(function(e){return console.log(e)})},b=function(e){return f.a.delete(s+"/"+e).then(function(e){return e.data}).catch(function(e){console.log("errored"),console.log(e)})},g=function(e,n){return f.a.put(s+"/"+e,{numbers:n}).then(function(e){return e.data}).catch(function(e){console.log(e)})},p=function(e){return console.log(e),f.a.post(s,{numbers:e}).then(function(e){return e.data}).catch(function(e){return console.log(e)})},E=(t(36),function(e){var n=e.message;return""===n[0]?r.a.createElement("div",null):!0===n[1]?r.a.createElement("div",{className:"message positive"},n[0]):r.a.createElement("div",{className:"message negative"},n[0])}),v=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],u=n[1],o=Object(a.useState)(""),d=Object(l.a)(o,2),f=d[0],s=d[1],v=Object(a.useState)(""),w=Object(l.a)(v,2),y=w[0],N=w[1],j=Object(a.useState)(""),O=Object(l.a)(j,2),C=O[0],S=O[1],k=Object(a.useState)(["",!1]),A=Object(l.a)(k,2),V=A[0],D=A[1];Object(a.useEffect)(function(){console.log("effect"),h().then(function(e){return u(e)})},[]),console.log("render",t.length,"person");return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(E,{message:V}),r.a.createElement(c,{filterVal:C,handleFilterChange:function(e){S(e.target.value)}}),r.a.createElement("h2",null," add new "),r.a.createElement(i,{handleSubmit:function(e){if(e.preventDefault(),console.log("handle submit"),t.find(function(e){return e.name===f})){var n=t.find(function(e){return e.name===f});if(!0===window.confirm("Are you sure, you want to update number of ".concat(n.name," ?"))){var a={name:f,number:y};g(n.id,a).then(function(e){D("undefined"===typeof e?["Number already deleted, please refresh to reflect",!1]:["Added entry "+n.name,!0]),u(t.map(function(n){return n.id===e.id?e:n}))})}}else{p({name:f,number:y}).then(function(e){u(t.concat(e)),D(["Added entry "+f,!0])})}s(""),N("")},newName:f,handleNameChange:function(e){s(e.target.value)},newNumber:y,handleNumberChange:function(e){N(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(m,{persons:t,filterVal:C,deleteEntry:function(e){var n=t.find(function(n){return n.id===e});!0===window.confirm("Are you sure, you want to delete ".concat(n.name," ?"))&&b(e).then(function(n){console.log("*****",n,"****"),D("undefined"===typeof n?["Number already deleted, please refresh to reflect",!1]:["Deleted entry",!0]),u(t.filter(function(n){return n.id!==e}))})}}))};o.a.render(r.a.createElement(v,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.281b3f2d.chunk.js.map